var opts={lines:15,length:3,width:2,radius:9,corners:0,rotate:0,color:"#C763C7",speed:1.7,trail:60,shadow:true,hwaccel:false,className:"spinner",zIndex:2000000000,top:"auto",left:"auto"};$(function(){resize();var a=0;window.setInterval(function(){if(a<3){a+=1;$(".wait").append(".")}else{a=0;$(".wait").html("")}},2000);window.onresize=resize});function resize(){if($("#sidebar").css("display")=="none"){$("#ctx").attr({width:window.innerWidth,height:window.innerHeight})}else{if(window.innerWidth>1103){canvasWidth=window.innerWidth-297;$("#ctx").attr({width:canvasWidth,height:window.innerHeight})}else{if(window.innerWidth<1103){canvasWidth=986;$("#ctx").attr({width:canvasWidth,height:window.innerHeight})}}}if(typeof(pony)=="object"){pony.spawnPony()}}$("#debugbtn").click(function(){$("#debug").slideToggle("2000","easeOutQuint");if($(this).css("bottom")=="196px"){$(this).animate({bottom:"0px"},"2000","easeOutQuint")}else{$(this).animate({bottom:"196px"},"2000","easeOutQuint")}});$("#opacity").click(function(){$("#opacity").fadeOut("200");$("#infobox").hide();$("div.box").hide()});$(document).keyup(function(a){console.log("Clicked: "+a.keyCode);if(a.keyCode==37){$("#positionBtns button#posleft").click()}else{if(a.keyCode==39){$("#positionBtns button#posright").click()}else{if(a.keyCode==96){$("#positionBtns button#poscenter").click()}else{if(a.keyCode==44){a.preventDefault();$(".exportPNG").click()}}}}});(function(a){a.fn.spin=function(d,c){var b={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}};if(Spinner){return this.each(function(){var f=a(this),e=f.data();if(e.spinner){e.spinner.stop();delete e.spinner}if(d!==false){if(typeof d==="string"){if(d in b){d=b[d]}else{d={}}if(c){d.color=c}}e.spinner=new Spinner(a.extend({color:f.css("color")},d)).spin(this)}})}else{throw"Spinner class not available."}}})(jQuery);!function(A,I,k){function j(d,f){var c=I.createElement(d||"div"),a;for(a in f){c[a]=f[a]}return c}function H(c){for(var a=1,d=arguments.length;a<d;a++){c.appendChild(arguments[a])}return c}function z(s,L,h,a){var d=["opacity",L,~~(s*100),h,a].join("-"),K=0.01+h/a*100,p=Math.max(1-(1-s)/L*(100-K),s),m=J.substring(0,J.indexOf("Animation")).toLowerCase(),v=m&&"-"+m+"-"||"";return x[d]||(E.insertRule("@"+v+"keyframes "+d+"{0%{opacity:"+p+"}"+K+"%{opacity:"+s+"}"+(K+0.01)+"%{opacity:1}"+(K+L)%100+"%{opacity:"+s+"}100%{opacity:"+p+"}}",E.cssRules.length),x[d]=1),d}function w(f,c){var a=f.style,d,h;if(a[c]!==k){return c}c=c.charAt(0).toUpperCase()+c.slice(1);for(h=0;h<b.length;h++){d=b[h]+c;if(a[d]!==k){return d}}}function D(c,a){for(var d in a){c.style[w(c,d)||d]=a[d]}return c}function y(f){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var a in d){f[a]===k&&(f[a]=d[a])}}return f}function g(c){var a={x:c.offsetLeft,y:c.offsetTop};while(c=c.offsetParent){a.x+=c.offsetLeft,a.y+=c.offsetTop}return a}var b=["webkit","Moz","ms","O"],x={},J,E=function(){var a=j("style",{type:"text/css"});return H(I.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),C={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto",position:"relative"},F=function q(a){if(!this.spin){return new q(a)}this.opts=y(a||{},q.defaults,C)};F.defaults={},y(F.prototype,{spin:function(N){this.stop();var T=this,o=T.opts,c=T.el=D(j(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),K=o.radius+o.length+o.width,S,P;N&&(N.insertBefore(c,N.firstChild||null),P=g(N),S=g(c),D(c,{left:(o.left=="auto"?P.x-S.x+(N.offsetWidth>>1):parseInt(o.left,10)+K)+"px",top:(o.top=="auto"?P.y-S.y+(N.offsetHeight>>1):parseInt(o.top,10)+K)+"px"})),c.setAttribute("aria-role","progressbar"),T.lines(c,T.opts);if(!J){var M=0,s=o.fps,L=s/o.speed,O=(1-o.opacity)/(L*o.trail/100),Q=L/o.lines;(function p(){M++;for(var d=o.lines;d;d--){var a=Math.max(1-(M+d*Q)%L*O,o.opacity);T.opacity(c,o.lines-d,a,o)}T.timeout=T.el&&setTimeout(p,~~(1000/s))})()}return T},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=k),this},lines:function(f,c){function a(m,l){return D(j(),{position:"absolute",width:c.length+c.width+"px",height:c.width+"px",background:m,boxShadow:l,transformOrigin:"left",transform:"rotate("+~~(360/c.lines*h+c.rotate)+"deg) translate("+c.radius+"px,0)",borderRadius:(c.corners*c.width>>1)+"px"})}var h=0,d;for(;h<c.lines;h++){d=D(j(),{position:"absolute",top:1+~(c.width/2)+"px",transform:c.hwaccel?"translate3d(0,0,0)":"",opacity:c.opacity,animation:J&&z(c.opacity,c.trail,h,c.lines)+" "+1/c.speed+"s linear infinite"}),c.shadow&&H(d,D(a("#000","0 0 4px #000"),{top:"2px"})),H(f,H(d,a(c.color,"0 0 1px rgba(0,0,0,.1)")))}return f},opacity:function(c,a,d){a<c.childNodes.length&&(c.childNodes[a].style.opacity=d)}}),function(){function c(f,d){return j("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',d)}var a=D(j("group"),{behavior:"url(#default#VML)"});!w(a,"transform")&&a.adj?(E.addRule(".spin-vml","behavior:url(#default#VML)"),F.prototype.lines=function(K,h){function L(){return D(c("group",{coordsize:p+" "+p,coordorigin:-d+" "+-d}),{width:p,height:p})}function m(l,f,n){H(v,H(D(L(),{rotation:360/h.lines*l+"deg",left:~~f}),H(D(c("roundrect",{arcsize:h.corners}),{width:d,height:h.width,left:h.radius,top:-h.width>>1,filter:n}),c("fill",{color:h.color,opacity:h.opacity}),c("stroke",{opacity:0}))))}var d=h.length+h.width,p=2*d,e=-(h.width+h.length)*2+"px",v=D(L(),{position:"absolute",top:e,left:e}),u;if(h.shadow){for(u=1;u<=h.lines;u++){m(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(u=1;u<=h.lines;u++){m(u)}return H(K,v)},F.prototype.opacity=function(l,f,m,h){var d=l.firstChild;h=h.shadow&&h.lines||0,d&&f+h<d.childNodes.length&&(d=d.childNodes[f+h],d=d&&d.firstChild,d=d&&d.firstChild,d&&(d.opacity=m))}):J=w(a,"animation")}(),typeof define=="function"&&define.amd?define(function(){return F}):A.Spinner=F}(window,document);
/*!
* Bootstrap.js by @fat & @mdo
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(a){a(function(){a.support.transition=function(){var b=function(){var d=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},f;for(f in c){if(d.style[f]!==undefined){return c[f]}}}();return b&&{end:b}}()})}(window.jQuery),!function(c){var a='[data-dismiss="alert"]',d=function(e){c(e).on("click",a,this.close)};d.prototype.close=function(f){function g(){e.trigger("closed").remove()}var j=c(this),h=j.attr("data-target"),e;h||(h=j.attr("href"),h=h&&h.replace(/.*(?=#[^\s]*$)/,"")),e=c(h),f&&f.preventDefault(),e.length||(e=j.hasClass("alert")?j:j.parent()),e.trigger(f=c.Event("close"));if(f.isDefaultPrevented()){return}e.removeClass("in"),c.support.transition&&e.hasClass("fade")?e.on(c.support.transition.end,g):g()};var b=c.fn.alert;c.fn.alert=function(e){return this.each(function(){var g=c(this),f=g.data("alert");f||g.data("alert",f=new d(this)),typeof e=="string"&&f[e].call(g)})},c.fn.alert.Constructor=d,c.fn.alert.noConflict=function(){return c.fn.alert=b,this},c(document).on("click.alert.data-api",a,d.prototype.close)}(window.jQuery),!function(b){var a=function(d,e){this.$element=b(d),this.options=b.extend({},b.fn.button.defaults,e)};a.prototype.setState=function(h){var f="disabled",j=this.$element,g=j.data(),d=j.is("input")?"val":"html";h+="Text",g.resetText||j.data("resetText",j[d]()),j[d](g[h]||this.options[h]),setTimeout(function(){h=="loadingText"?j.addClass(f).attr(f,f):j.removeClass(f).removeAttr(f)},0)},a.prototype.toggle=function(){var d=this.$element.closest('[data-toggle="buttons-radio"]');d&&d.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=b.fn.button;b.fn.button=function(d){return this.each(function(){var g=b(this),e=g.data("button"),f=typeof d=="object"&&d;e||g.data("button",e=new a(this,f)),d=="toggle"?e.toggle():d&&e.setState(d)})},b.fn.button.defaults={loadingText:"loading..."},b.fn.button.Constructor=a,b.fn.button.noConflict=function(){return b.fn.button=c,this},b(document).on("click.button.data-api","[data-toggle^=button]",function(d){var e=b(d.target);e.hasClass("btn")||(e=e.closest(".btn")),e.button("toggle")})}(window.jQuery),!function(b){var a=function(d,e){this.$element=b(d),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.options.pause=="hover"&&this.$element.on("mouseenter",b.proxy(this.pause,this)).on("mouseleave",b.proxy(this.cycle,this))};a.prototype={cycle:function(d){return d||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(b.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(d){var f=this.getActiveIndex(),e=this;if(d>this.$items.length-1||d<0){return}return this.sliding?this.$element.one("slid",function(){e.to(d)}):f==d?this.pause().cycle():this.slide(d>f?"next":"prev",b(this.$items[d]))},pause:function(d){return d||(this.paused=!0),this.$element.find(".next, .prev").length&&b.support.transition.end&&(this.$element.trigger(b.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding){return}return this.slide("next")},prev:function(){if(this.sliding){return}return this.slide("prev")},slide:function(m,g){var d=this.$element.find(".item.active"),h=g||d[m](),p=this.interval,e=m=="next"?"left":"right",l=m=="next"?"first":"last",k=this,j;this.sliding=!0,p&&this.pause(),h=h.length?h:this.$element.find(".item")[l](),j=b.Event("slide",{relatedTarget:h[0],direction:e});if(h.hasClass("active")){return}this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var f=b(k.$indicators.children()[k.getActiveIndex()]);f&&f.addClass("active")}));if(b.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented()){return}h.addClass(m),h[0].offsetWidth,d.addClass(e),h.addClass(e),this.$element.one(b.support.transition.end,function(){h.removeClass([m,e].join(" ")).addClass("active"),d.removeClass(["active",e].join(" ")),k.sliding=!1,setTimeout(function(){k.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented()){return}d.removeClass("active"),h.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return p&&this.cycle(),this}};var c=b.fn.carousel;b.fn.carousel=function(d){return this.each(function(){var g=b(this),e=g.data("carousel"),f=b.extend({},b.fn.carousel.defaults,typeof d=="object"&&d),h=typeof d=="string"?d:f.slide;e||g.data("carousel",e=new a(this,f)),typeof d=="number"?e.to(d):h?e[h]():f.interval&&e.pause().cycle()})},b.fn.carousel.defaults={interval:5000,pause:"hover"},b.fn.carousel.Constructor=a,b.fn.carousel.noConflict=function(){return b.fn.carousel=c,this},b(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var j=b(this),g,d=b(j.attr("data-target")||(g=j.attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,"")),f=b.extend({},d.data(),j.data()),h;d.carousel(f),(h=j.attr("data-slide-to"))&&d.data("carousel").pause().to(h).cycle(),e.preventDefault()})}(window.jQuery),!function(b){var a=function(d,e){this.$element=b(d),this.options=b.extend({},b.fn.collapse.defaults,e),this.options.parent&&(this.$parent=b(this.options.parent)),this.options.toggle&&this.toggle()};a.prototype={constructor:a,dimension:function(){var d=this.$element.hasClass("width");return d?"width":"height"},show:function(){var e,g,f,d;if(this.transitioning||this.$element.hasClass("in")){return}e=this.dimension(),g=b.camelCase(["scroll",e].join("-")),f=this.$parent&&this.$parent.find("> .accordion-group > .in");if(f&&f.length){d=f.data("collapse");if(d&&d.transitioning){return}f.collapse("hide"),d||f.data("collapse",null)}this.$element[e](0),this.transition("addClass",b.Event("show"),"shown"),b.support.transition&&this.$element[e](this.$element[0][g])},hide:function(){var d;if(this.transitioning||!this.$element.hasClass("in")){return}d=this.dimension(),this.reset(this.$element[d]()),this.transition("removeClass",b.Event("hide"),"hidden"),this.$element[d](0)},reset:function(f){var d=this.dimension();return this.$element.removeClass("collapse")[d](f||"auto")[0].offsetWidth,this.$element[f!==null?"addClass":"removeClass"]("collapse"),this},transition:function(e,h,g){var d=this,f=function(){h.type=="show"&&d.reset(),d.transitioning=0,d.$element.trigger(g)};this.$element.trigger(h);if(h.isDefaultPrevented()){return}this.transitioning=1,this.$element[e]("in"),b.support.transition&&this.$element.hasClass("collapse")?this.$element.one(b.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=b.fn.collapse;b.fn.collapse=function(d){return this.each(function(){var g=b(this),e=g.data("collapse"),f=b.extend({},b.fn.collapse.defaults,g.data(),typeof d=="object"&&d);e||g.data("collapse",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.collapse.defaults={toggle:!0},b.fn.collapse.Constructor=a,b.fn.collapse.noConflict=function(){return b.fn.collapse=c,this},b(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var h=b(this),g,d=h.attr("data-target")||e.preventDefault()||(g=h.attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,""),f=b(d).data("collapse")?"toggle":h.data();h[b(d).hasClass("in")?"addClass":"removeClass"]("collapsed"),b(d).collapse(f)})}(window.jQuery),!function(f){function d(){f(a).each(function(){b(f(this)).removeClass("open")})}function b(e){var j=e.attr("data-target"),h;j||(j=e.attr("href"),j=j&&/#/.test(j)&&j.replace(/.*(?=#[^\s]*$)/,"")),h=j&&f(j);if(!h||!h.length){h=e.parent()}return h}var a="[data-toggle=dropdown]",g=function(e){var h=f(e).on("click.dropdown.data-api",this.toggle);f("html").on("click.dropdown.data-api",function(){h.parent().removeClass("open")})};g.prototype={constructor:g,toggle:function(e){var k=f(this),h,j;if(k.is(".disabled, :disabled")){return}return h=b(k),j=h.hasClass("open"),d(),j||h.toggleClass("open"),k.focus(),!1},keydown:function(p){var k,j,m,h,e,l;if(!/(38|40|27)/.test(p.keyCode)){return}k=f(this),p.preventDefault(),p.stopPropagation();if(k.is(".disabled, :disabled")){return}h=b(k),e=h.hasClass("open");if(!e||e&&p.keyCode==27){return p.which==27&&h.find(a).focus(),k.click()}j=f("[role=menu] li:not(.divider):visible a",h);if(!j.length){return}l=j.index(j.filter(":focus")),p.keyCode==38&&l>0&&l--,p.keyCode==40&&l<j.length-1&&l++,~l||(l=0),j.eq(l).focus()}};var c=f.fn.dropdown;f.fn.dropdown=function(e){return this.each(function(){var j=f(this),h=j.data("dropdown");h||j.data("dropdown",h=new g(this)),typeof e=="string"&&h[e].call(j)})},f.fn.dropdown.Constructor=g,f.fn.dropdown.noConflict=function(){return f.fn.dropdown=c,this},f(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(h){h.stopPropagation()}).on("click.dropdown-menu",function(h){h.stopPropagation()}).on("click.dropdown.data-api",a,g.prototype.toggle).on("keydown.dropdown.data-api",a+", [role=menu]",g.prototype.keydown)}(window.jQuery),!function(b){var a=function(d,e){this.options=e,this.$element=b(d).delegate('[data-dismiss="modal"]',"click.dismiss.modal",b.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};a.prototype={constructor:a,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var d=this,e=b.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented()){return}this.isShown=!0,this.escape(),this.backdrop(function(){var f=b.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(document.body),d.$element.show(),f&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus(),f?d.$element.one(b.support.transition.end,function(){d.$element.focus().trigger("shown")}):d.$element.focus().trigger("shown")})},hide:function(d){d&&d.preventDefault();var e=this;d=b.Event("hide"),this.$element.trigger(d);if(!this.isShown||d.isDefaultPrevented()){return}this.isShown=!1,this.escape(),b(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),b.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var d=this;b(document).on("focusin.modal",function(f){d.$element[0]!==f.target&&!d.$element.has(f.target).length&&d.$element.focus()})},escape:function(){var d=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){e.which==27&&d.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var d=this,e=setTimeout(function(){d.$element.off(b.support.transition.end),d.hideModal()},500);this.$element.one(b.support.transition.end,function(){clearTimeout(e),d.hideModal()})},hideModal:function(){var d=this;this.$element.hide(),this.backdrop(function(){d.removeBackdrop(),d.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var g=this,f=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=b.support.transition&&f;this.$backdrop=b('<div class="modal-backdrop '+f+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?b.proxy(this.$element[0].focus,this.$element[0]):b.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!e){return}d?this.$backdrop.one(b.support.transition.end,e):e()}else{!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b.support.transition.end,e):e()):e&&e()}}};var c=b.fn.modal;b.fn.modal=function(d){return this.each(function(){var g=b(this),e=g.data("modal"),f=b.extend({},b.fn.modal.defaults,g.data(),typeof d=="object"&&d);e||g.data("modal",e=new a(this,f)),typeof d=="string"?e[d]():f.show&&e.show()})},b.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},b.fn.modal.Constructor=a,b.fn.modal.noConflict=function(){return b.fn.modal=c,this},b(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var h=b(this),g=h.attr("href"),d=b(h.attr("data-target")||g&&g.replace(/.*(?=#[^\s]+$)/,"")),f=d.data("modal")?"toggle":b.extend({remote:!/#/.test(g)&&g},d.data(),h.data());e.preventDefault(),d.modal(f).one("hide",function(){h.focus()})})}(window.jQuery),!function(b){var a=function(f,d){this.init("tooltip",f,d)};a.prototype={constructor:a,init:function(g,l,j){var f,h,k,e,d;this.type=g,this.$element=b(l),this.options=this.getOptions(j),this.enabled=!0,k=this.options.trigger.split(" ");for(d=k.length;d--;){e=k[d],e=="click"?this.$element.on("click."+this.type,this.options.selector,b.proxy(this.toggle,this)):e!="manual"&&(f=e=="hover"?"mouseenter":"focus",h=e=="hover"?"mouseleave":"blur",this.$element.on(f+"."+this.type,this.options.selector,b.proxy(this.enter,this)),this.$element.on(h+"."+this.type,this.options.selector,b.proxy(this.leave,this)))}this.options.selector?this._options=b.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(d){return d=b.extend({},b.fn[this.type].defaults,this.$element.data(),d),d.delay&&typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),d},enter:function(e){var g=b.fn[this.type].defaults,f={},d;this._options&&b.each(this._options,function(j,h){g[j]!=h&&(f[j]=h)},this),d=b(e.currentTarget)[this.type](f).data(this.type);if(!d.options.delay||!d.options.delay.show){return d.show()}clearTimeout(this.timeout),d.hoverState="in",this.timeout=setTimeout(function(){d.hoverState=="in"&&d.show()},d.options.delay.show)},leave:function(d){var e=b(d.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!e.options.delay||!e.options.delay.hide){return e.hide()}e.hoverState="out",this.timeout=setTimeout(function(){e.hoverState=="out"&&e.hide()},e.options.delay.hide)},show:function(){var f,k,h,e,g,j,d=b.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(d);if(d.isDefaultPrevented()){return}f=this.tip(),this.setContent(),this.options.animation&&f.addClass("fade"),g=typeof this.options.placement=="function"?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,f.detach().css({top:0,left:0,display:"block"}),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),k=this.getPosition(),h=f[0].offsetWidth,e=f[0].offsetHeight;switch(g){case"bottom":j={top:k.top+k.height,left:k.left+k.width/2-h/2};break;case"top":j={top:k.top-e,left:k.left+k.width/2-h/2};break;case"left":j={top:k.top+k.height/2-e/2,left:k.left-h};break;case"right":j={top:k.top+k.height/2-e/2,left:k.left+k.width}}this.applyPlacement(j,g),this.$element.trigger("shown")}},applyPlacement:function(j,m){var g=this.tip(),d=g[0].offsetWidth,h=g[0].offsetHeight,p,f,l,k;g.offset(j).addClass(m).addClass("in"),p=g[0].offsetWidth,f=g[0].offsetHeight,m=="top"&&f!=h&&(j.top=j.top+h-f,k=!0),m=="bottom"||m=="top"?(l=0,j.left<0&&(l=j.left*-2,j.left=0,g.offset(j),p=g[0].offsetWidth,f=g[0].offsetHeight),this.replaceArrow(l-d+p,p,"left")):this.replaceArrow(f-h,f,"top"),k&&g.offset(j)},replaceArrow:function(f,d,g){this.arrow().css(g,f?50*(1-f/d)+"%":"")},setContent:function(){var f=this.tip(),d=this.getTitle();f.find(".tooltip-inner")[this.options.html?"html":"text"](d),f.removeClass("fade in top bottom left right")},hide:function(){function e(){var h=setTimeout(function(){g.off(b.support.transition.end).detach()},500);g.one(b.support.transition.end,function(){clearTimeout(h),g.detach()})}var d=this,g=this.tip(),f=b.Event("hide");this.$element.trigger(f);if(f.isDefaultPrevented()){return}return g.removeClass("in"),b.support.transition&&this.$tip.hasClass("fade")?e():g.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var d=this.$element;(d.attr("title")||typeof d.attr("data-original-title")!="string")&&d.attr("data-original-title",d.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var d=this.$element[0];return b.extend({},typeof d.getBoundingClientRect=="function"?d.getBoundingClientRect():{width:d.offsetWidth,height:d.offsetHeight},this.$element.offset())},getTitle:function(){var f,d=this.$element,g=this.options;return f=d.attr("data-original-title")||(typeof g.title=="function"?g.title.call(d[0]):g.title),f},tip:function(){return this.$tip=this.$tip||b(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(d){var e=d?b(d.currentTarget)[this.type](this._options).data(this.type):this;e.tip().hasClass("in")?e.hide():e.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=b.fn.tooltip;b.fn.tooltip=function(d){return this.each(function(){var g=b(this),e=g.data("tooltip"),f=typeof d=="object"&&d;e||g.data("tooltip",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.tooltip.Constructor=a,b.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.fn.tooltip.noConflict=function(){return b.fn.tooltip=c,this}}(window.jQuery),!function(b){var a=function(f,d){this.init("popover",f,d)};a.prototype=b.extend({},b.fn.tooltip.Constructor.prototype,{constructor:a,setContent:function(){var f=this.tip(),d=this.getTitle(),g=this.getContent();f.find(".popover-title")[this.options.html?"html":"text"](d),f.find(".popover-content")[this.options.html?"html":"text"](g),f.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var f,d=this.$element,g=this.options;return f=(typeof g.content=="function"?g.content.call(d[0]):g.content)||d.attr("data-content"),f},tip:function(){return this.$tip||(this.$tip=b(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=b.fn.popover;b.fn.popover=function(d){return this.each(function(){var g=b(this),e=g.data("popover"),f=typeof d=="object"&&d;e||g.data("popover",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.popover.Constructor=a,b.fn.popover.defaults=b.extend({},b.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.fn.popover.noConflict=function(){return b.fn.popover=c,this}}(window.jQuery),!function(b){function a(e,h){var g=b.proxy(this.process,this),d=b(e).is("body")?b(window):b(e),f;this.options=b.extend({},b.fn.scrollspy.defaults,h),this.$scrollElement=d.on("scroll.scroll-spy.data-api",g),this.selector=(this.options.target||(f=b(e).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=b("body"),this.refresh(),this.process()}a.prototype={constructor:a,refresh:function(){var d=this,e;this.offsets=b([]),this.targets=b([]),e=this.$body.find(this.selector).map(function(){var h=b(this),g=h.data("target")||h.attr("href"),f=/^#\w/.test(g)&&b(g);return f&&f.length&&[[f.position().top+(!b.isWindow(d.$scrollElement.get(0))&&d.$scrollElement.scrollTop()),g]]||null}).sort(function(g,f){return g[0]-f[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},process:function(){var j=this.$scrollElement.scrollTop()+this.options.offset,f=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,l=f-this.$scrollElement.height(),h=this.offsets,d=this.targets,g=this.activeTarget,k;if(j>=l){return g!=(k=d.last()[0])&&this.activate(k)}for(k=h.length;k--;){g!=d[k]&&j>=h[k]&&(!h[k+1]||j<=h[k+1])&&this.activate(d[k])}},activate:function(d){var f,e;this.activeTarget=d,b(this.selector).parent(".active").removeClass("active"),e=this.selector+'[data-target="'+d+'"],'+this.selector+'[href="'+d+'"]',f=b(e).parent("li").addClass("active"),f.parent(".dropdown-menu").length&&(f=f.closest("li.dropdown").addClass("active")),f.trigger("activate")}};var c=b.fn.scrollspy;b.fn.scrollspy=function(d){return this.each(function(){var g=b(this),e=g.data("scrollspy"),f=typeof d=="object"&&d;e||g.data("scrollspy",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.scrollspy.Constructor=a,b.fn.scrollspy.defaults={offset:10},b.fn.scrollspy.noConflict=function(){return b.fn.scrollspy=c,this},b(window).on("load",function(){b('[data-spy="scroll"]').each(function(){var d=b(this);d.scrollspy(d.data())})})}(window.jQuery),!function(b){var a=function(d){this.element=b(d)};a.prototype={constructor:a,show:function(){var e=this.element,j=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target"),d,f,h;g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,""));if(e.parent("li").hasClass("active")){return}d=j.find(".active:last a")[0],h=b.Event("show",{relatedTarget:d}),e.trigger(h);if(h.isDefaultPrevented()){return}f=b(g),this.activate(e.parent("li"),j),this.activate(f,f.parent(),function(){e.trigger({type:"shown",relatedTarget:d})})},activate:function(e,j,g){function h(){d.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),f?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),g&&g()}var d=j.find("> .active"),f=g&&b.support.transition&&d.hasClass("fade");f?d.one(b.support.transition.end,h):h(),d.removeClass("in")}};var c=b.fn.tab;b.fn.tab=function(d){return this.each(function(){var f=b(this),e=f.data("tab");e||f.data("tab",e=new a(this)),typeof d=="string"&&e[d]()})},b.fn.tab.Constructor=a,b.fn.tab.noConflict=function(){return b.fn.tab=c,this},b(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(d){d.preventDefault(),b(this).tab("show")})}(window.jQuery),!function(b){var a=function(d,e){this.$element=b(d),this.options=b.extend({},b.fn.typeahead.defaults,e),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=b(this.options.menu),this.shown=!1,this.listen()};a.prototype={constructor:a,select:function(){var d=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(d)).change(),this.hide()},updater:function(d){return d},show:function(){var d=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:d.top+d.height,left:d.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(d){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=b.isFunction(this.source)?this.source(this.query,b.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(d){var e=this;return d=b.grep(d,function(f){return e.matcher(f)}),d=this.sorter(d),d.length?this.render(d.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(d){return ~d.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(h){var f=[],j=[],g=[],d;while(d=h.shift()){d.toLowerCase().indexOf(this.query.toLowerCase())?~d.indexOf(this.query)?j.push(d):g.push(d):f.push(d)}return f.concat(j,g)},highlighter:function(f){var d=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return f.replace(new RegExp("("+d+")","ig"),function(h,g){return"<strong>"+g+"</strong>"})},render:function(d){var e=this;return d=b(d).map(function(f,g){return f=b(e.options.item).attr("data-value",g),f.find("a").html(e.highlighter(g)),f[0]}),d.first().addClass("active"),this.$menu.html(d),this},next:function(d){var f=this.$menu.find(".active").removeClass("active"),e=f.next();e.length||(e=b(this.$menu.find("li")[0])),e.addClass("active")},prev:function(f){var d=this.$menu.find(".active").removeClass("active"),g=d.prev();g.length||(g=this.$menu.find("li").last()),g.addClass("active")},listen:function(){this.$element.on("focus",b.proxy(this.focus,this)).on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",b.proxy(this.keydown,this)),this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter","li",b.proxy(this.mouseenter,this)).on("mouseleave","li",b.proxy(this.mouseleave,this))},eventSupported:function(f){var d=f in this.$element;return d||(this.$element.setAttribute(f,"return;"),d=typeof this.$element[f]=="function"),d},move:function(d){if(!this.shown){return}switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();break;case 38:d.preventDefault(),this.prev();break;case 40:d.preventDefault(),this.next()}d.stopPropagation()},keydown:function(d){this.suppressKeyPressRepeat=~b.inArray(d.keyCode,[40,38,9,13,27]),this.move(d)},keypress:function(d){if(this.suppressKeyPressRepeat){return}this.move(d)},keyup:function(d){switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}d.stopPropagation(),d.preventDefault()},focus:function(d){this.focused=!0},blur:function(d){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(d){d.stopPropagation(),d.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(d){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),b(d.currentTarget).addClass("active")},mouseleave:function(d){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=b.fn.typeahead;b.fn.typeahead=function(d){return this.each(function(){var g=b(this),e=g.data("typeahead"),f=typeof d=="object"&&d;e||g.data("typeahead",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},b.fn.typeahead.Constructor=a,b.fn.typeahead.noConflict=function(){return b.fn.typeahead=c,this},b(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(d){var e=b(this);if(e.data("typeahead")){return}e.typeahead(e.data())})}(window.jQuery),!function(b){var a=function(d,e){this.options=b.extend({},b.fn.affix.defaults,e),this.$window=b(window).on("scroll.affix.data-api",b.proxy(this.checkPosition,this)).on("click.affix.data-api",b.proxy(function(){setTimeout(b.proxy(this.checkPosition,this),1)},this)),this.$element=b(d),this.checkPosition()};a.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return}var g=b(document).height(),l=this.$window.scrollTop(),j=this.$element.offset(),f=this.options.offset,h=f.bottom,k=f.top,e="affix affix-top affix-bottom",d;typeof f!="object"&&(h=k=f),typeof k=="function"&&(k=f.top()),typeof h=="function"&&(h=f.bottom()),d=this.unpin!=null&&l+this.unpin<=j.top?!1:h!=null&&j.top+this.$element.height()>=g-h?"bottom":k!=null&&l<=k?"top":!1;if(this.affixed===d){return}this.affixed=d,this.unpin=d=="bottom"?j.top-l:null,this.$element.removeClass(e).addClass("affix"+(d?"-"+d:""))};var c=b.fn.affix;b.fn.affix=function(d){return this.each(function(){var g=b(this),e=g.data("affix"),f=typeof d=="object"&&d;e||g.data("affix",e=new a(this,f)),typeof d=="string"&&e[d]()})},b.fn.affix.Constructor=a,b.fn.affix.defaults={offset:0},b.fn.affix.noConflict=function(){return b.fn.affix=c,this},b(window).on("load",function(){b('[data-spy="affix"]').each(function(){var d=b(this),e=d.data();e.offset=e.offset||{},e.offsetBottom&&(e.offset.bottom=e.offsetBottom),e.offsetTop&&(e.offset.top=e.offsetTop),d.affix(e)})})}(window.jQuery);!function(c){var d=function(e){this.value={h:1,s:1,b:1,a:1};this.setColor(e)};d.prototype={constructor:d,setColor:function(f){f=f.toLowerCase();var e=this;c.each(b.stringParsers,function(j,l){var h=l.re.exec(f),g=h&&l.parse(h),k=l.space||"rgba";if(g){if(k==="hsla"){e.value=b.RGBtoHSB.apply(null,b.HSLtoRGB.apply(null,g))}else{e.value=b.RGBtoHSB.apply(null,g)}return false}})},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt((1-e)*100,10)/100},toRGB:function(k,o,l,m){if(!k){k=this.value.h;o=this.value.s;l=this.value.b}k*=360;var j,n,f,g,e;k=(k%360)/60;e=l*o;g=e*(1-Math.abs(k%2-1));j=n=f=l-e;k=~~k;j+=[e,g,0,0,g,e][k];n+=[g,e,e,g,0,0][k];f+=[0,0,g,e,e,g][k];return{r:Math.round(j*255),g:Math.round(n*255),b:Math.round(f*255),a:m||this.value.a}},toHex:function(k,j,e,f){var g=this.toRGB(k,j,e,f);return"#"+((1<<24)|(parseInt(g.r)<<16)|(parseInt(g.g)<<8)|parseInt(g.b)).toString(16).substr(1)},toHSL:function(m,l,f,g){if(!m){m=this.value.h;l=this.value.s;f=this.value.b}var k=m,e=(2-l)*f,j=l*f;if(e>0&&e<=1){j/=e}else{j/=2-e}e/=2;if(j>1){j=1}return{h:k,s:j,l:e,a:g||this.value.a}}};var a=function(f,e){this.element=c(f);var g=e.format||this.element.data("color-format")||"hex";this.format=b.translateFormats[g];this.isInput=this.element.is("input");this.component=this.element.is(".color")?this.element.find(".add-on"):false;this.picker=c(b.template).appendTo("body").on("mousedown",c.proxy(this.mousedown,this));if(this.isInput){this.element.on({focus:c.proxy(this.show,this),keyup:c.proxy(this.update,this)})}else{if(this.component){this.component.on({click:c.proxy(this.show,this)})}else{this.element.on({click:c.proxy(this.show,this)})}}if(g==="rgba"||g==="hsla"){this.picker.addClass("alpha");this.alpha=this.picker.find(".colorpicker-alpha")[0].style}if(this.component){this.picker.find(".colorpicker-color").hide();this.preview=this.element.find("i")[0].style}else{this.preview=this.picker.find("div:last")[0].style}this.base=this.picker.find("div:first")[0].style;this.update()};a.prototype={constructor:a,show:function(f){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();c(window).on("resize",c.proxy(this.place,this));if(!this.isInput){if(f){f.stopPropagation();f.preventDefault()}}c(document).on({mousedown:c.proxy(this.hide,this)});this.element.trigger({type:"show",color:this.color})},update:function(){this.color=new d(this.isInput?this.element.prop("value"):this.element.data("color"));this.picker.find("i").eq(0).css({left:this.color.value.s*100,top:100-this.color.value.b*100}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a));this.previewColor()},setValue:function(e){this.color=new d(e);this.picker.find("i").eq(0).css({left:this.color.value.s*100,top:100-this.color.value.b*100}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a));this.previewColor();this.element.trigger({type:"changeColor",color:this.color})},hide:function(){this.picker.hide();c(window).off("resize",this.place);if(!this.isInput){c(document).off({mousedown:this.hide});if(this.component){this.element.find("input").prop("value",this.format.call(this))}this.element.data("color",this.format.call(this))}else{this.element.prop("value",this.format.call(this))}this.element.trigger({type:"hide",color:this.color})},place:function(){var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+this.height,left:e.left})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(f){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1);if(this.alpha){this.alpha.backgroundColor=this.color.toHex()}},pointer:null,slider:null,mousedown:function(h){h.stopPropagation();h.preventDefault();var g=c(h.target);var f=g.closest("div");if(!f.is(".colorpicker")){if(f.is(".colorpicker-saturation")){this.slider=c.extend({},b.sliders.saturation)}else{if(f.is(".colorpicker-hue")){this.slider=c.extend({},b.sliders.hue)}else{if(f.is(".colorpicker-alpha")){this.slider=c.extend({},b.sliders.alpha)}else{return false}}}var j=f.offset();this.slider.knob=f.find("i")[0].style;this.slider.left=h.pageX-j.left;this.slider.top=h.pageY-j.top;this.pointer={left:h.pageX,top:h.pageY};c(document).on({mousemove:c.proxy(this.mousemove,this),mouseup:c.proxy(this.mouseup,this)}).trigger("mousemove")}return false},mousemove:function(h){h.stopPropagation();h.preventDefault();var g=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((h.pageX||this.pointer.left)-this.pointer.left)));var f=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((h.pageY||this.pointer.top)-this.pointer.top)));this.slider.knob.left=g+"px";this.slider.knob.top=f+"px";if(this.slider.callLeft){this.color[this.slider.callLeft].call(this.color,g/100)}if(this.slider.callTop){this.color[this.slider.callTop].call(this.color,f/100)}this.previewColor();this.element.trigger({type:"changeColor",color:this.color});return false},mouseup:function(f){f.stopPropagation();f.preventDefault();c(document).off({mousemove:this.mousemove,mouseup:this.mouseup});return false}};c.fn.colorpicker=function(e){return this.each(function(){var h=c(this),g=h.data("colorpicker"),f=typeof e==="object"&&e;if(!g){h.data("colorpicker",(g=new a(this,c.extend({},c.fn.colorpicker.defaults,f))))}if(typeof e==="string"){g[e]()}})};c.fn.colorpicker.defaults={};c.fn.colorpicker.Constructor=a;var b={translateFormats:{rgb:function(){var e=this.color.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.color.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hsl:function(){var e=this.color.toHSL();return"hsl("+Math.round(e.h*360)+","+Math.round(e.s*100)+"%,"+Math.round(e.l*100)+"%)"},hsla:function(){var e=this.color.toHSL();return"hsla("+Math.round(e.h*360)+","+Math.round(e.s*100)+"%,"+Math.round(e.l*100)+"%,"+e.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:false,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:false,callTop:"setAlpha"}},RGBtoHSB:function(m,l,e,h){m/=255;l/=255;e/=255;var k,j,f,n;f=Math.max(m,l,e);n=f-Math.min(m,l,e);k=(n===0?null:f==m?(l-e)/n:f==l?(e-m)/n+2:(m-l)/n+4);k=((k+360)%6)*60/360;j=n===0?0:n/f;return{h:k||1,s:j,b:f,a:h||1}},HueToRGB:function(g,f,e){if(e<0){e+=1}else{if(e>1){e-=1}}if((e*6)<1){return g+(f-g)*e*6}else{if((e*2)<1){return f}else{if((e*3)<2){return g+(f-g)*((2/3)-e)*6}else{return g}}}},HSLtoRGB:function(o,x,m,w){if(x<0){x=0}var f;if(m<=0.5){f=m*(1+x)}else{f=m+x-(m*x)}var j=2*m-f;var u=o+(1/3);var k=o;var n=o-(1/3);var e=Math.round(b.HueToRGB(j,f,u)*255);var t=Math.round(b.HueToRGB(j,f,k)*255);var v=Math.round(b.HueToRGB(j,f,n)*255);return[e,t,v,w||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery);UI={};UI=(function(){function b(d,c){$("#alerts div").fadeOut(300);$("#alerts").html('<div class="'+c+' Alert" style="display: none;">'+d+"</div>");$("#alerts .Alert").fadeIn(200,function(){$("#alerts .Alert").delay(2000).fadeOut(300)})}var a={test:"derp"};return{makeAlert:b,assets:a}})();$("#positionBtns form input").click(function(a){a.preventDefault();if($(this).attr("name")=="left"){pony.position[0]-=45;if(pony.position[0]<=-180){pony.position[0]=180}}else{if($(this).attr("name")=="center"){pony.position[0]=0}else{if($(this).attr("name")=="right"){pony.position[0]+=45;if(pony.position[0]>180){pony.position[0]=-135}}}}pony.spawnPony()});$(function(){$("#scaleBar").slider({range:"min",min:0,max:100,value:100,animate:true,slide:function(a,b){var c=b.value*0.01;pony.scale=c;pony.spawnPony();$("#scaleBar-percentage").text("Scale: "+b.value+"%")}})});$(function(){$("#colorBody, #colorOutline").colorpicker()});$("#setColors").submit(function(a){a.preventDefault();if(colorBody.value!=""){pony.colorBody=colorBody.value}else{colorBody.value=pony.colorBody}if(colorOutline.value!=""){pony.colorOutline=colorOutline.value}else{colorOutline.value=pony.colorOutline}if(/^#[0-9A-F]{6}$/i.test(pony.colorBody)===false||/^#[0-9A-F]{6}$/i.test(pony.colorOutline)===false){UI.makeAlert("Incorrect Atributes!","red")}else{if(pony.colorBody==pony.colorOutline){UI.makeAlert("Values are identical!","red")}else{pony.spawnPony();UI.makeAlert("Colors changed.","green")}}return true});$("#ponyOptions input[type=radio]").change(function(){var a=this.name;var b=this.value;pony.options[a]=b;pony.spawnPony()});$("#bglist a").click(function(b){b.preventDefault;var a=$(this).attr("data-bgname");background.url=a;$("#spin").show().spin(opts);pony.spawnPony()});$(".saveJson").click(function(){if(pname.value==""||author.value==""){UI.makeAlert("Set Name and Author first!","red");$("#pname, #author").css({backgroundColor:"#F99"});setTimeout(function(){$("#pname, #author").removeAttr("style")},4000)}else{UI.makeAlert("Saved!","green");$("#pname, #author").css("border","none");save.jsonSave(pname.value,author.value)}});$(".exportPNG").click(function(){if(pname.value==""||author.value==""){UI.makeAlert("Set Name and Author first!","red");$("#pname, #author").animate({backgroundColor:"#F99"},300);setTimeout(function(){$("#pname, #author").animate({backgroundColor:""},300)},4000)}else{$("#pname, #author").css("border","none");save.canvasExport(pname.value,author.value,function(){UI.makeAlert("Exported!","green")})}});$(".jsonLoad").click(function(){$("#opacity").fadeIn("200");$("div#load").show();$("#infobox").show()});$(".ponycodeConvert").click(function(){UI.makeAlert("In progress, come back later!","green")});$(".hideSidebar").click(function(){if($("#sidebar").css("display")=="none"){$(this).children("i").removeClass("icon-ok");$("#sidebar").css("display","block");resize()}else{$(this).children("i").addClass("icon-ok");$("#sidebar").css("display","none");if($(this).css("bottom")=="196px"){$(this).animate({bottom:"0px"},"2000","easeOutQuint")}else{$(this).animate({bottom:"196px"},"2000","easeOutQuint")}resize()}});$(".enableFullscreen").click(function(){var a=(document.fullScreenElement&&document.fullScreenElement!==null)||(document.mozFullScreen||document.webkitIsFullScreen);if(!a){$(this).children("i").addClass("icon-ok");doFullscreen(1)}else{$(this).children("i").removeClass("icon-ok");doFullscreen(0)}});$("a.about").click(function(){$("#opacity").fadeIn("200");$("div#about").show();$("#infobox").show()});function doFullscreen(b){var a=document.documentElement;if(b==1){if(a.requestFullscreen){a.requestFullscreen()}else{if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else{if(a.webkitRequestFullScreen){a.webkitRequestFullScreen()}}}}else{if(document.cancelFullscreen){document.cancelFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}}}}}var Alerts,R,G,B;var loadData={};function cutHex(a){return(a.charAt(0)=="#")?a.substring(1,7):a}function intervalaction(){if(colorOutline.value.charAt(0)!="#"&colorOutline.value.charAt(0)!=""){colorOutline.value="#"+colorOutline.value}if(colorOutline.value.length>7){colorOutline.value=colorOutline.value.slice(0,-1)}if(colorOutline.value.charAt(1)=="#"){colorOutline.value=colorOutline.value.slice(1)}if(colorBody.value.charAt(1)=="#"){colorBody.value=colorBody.value.slice(0,-1)}if(colorBody.value.charAt(0)!="#"&colorBody.value.charAt(0)!=""){colorBody.value="#"+colorBody.value}if(colorBody.value.length>7){colorBody.value=colorBody.value.slice(0,-1)}}setInterval("intervalaction();",10);function convertColors(c){if(typeof(c)=="object"){var b=c[0];var a=c[1];var d=c[2]}else{var b=parseInt((cutHex(c)).substring(0,2),16);var a=parseInt((cutHex(c)).substring(2,4),16);var d=parseInt((cutHex(c)).substring(4,6),16)}b=Math.round(b*68/100);a=Math.round(a*68/100);d=Math.round(d*68/100);return new Array(b,a,d)}function flash(a){$("#flashbox").show().animate({opacity:0.9},300).fadeOut(2000).css({opacity:1})}var models="mdls/minify.js";var canvas=document.getElementById("ctx");var ctx=canvas.getContext("2d");var horn={};var background=(function(){function a(b,e,d){if(typeof(e)!="undefined"&e==1){console.log(e);if(/^#[0-9A-F]{6}$/i.test(background.url)===true){b.fillStyle=background.url;b.fillRect(0,0,canvas.width,canvas.height);if(typeof(d)!="undefined"){d()}$("#spin").hide()}else{if(background.url=="transparent"){b.clearRect(0,0,canvas.width,canvas.height);b.restore();if(typeof(d)!="undefined"){d()}$("#spin").hide()}else{var c=new Image();c.onload=function(){b.clearRect(0,0,canvas.width,canvas.height);b.restore();b.drawImage(c,0,0);if(typeof(d)!="undefined"){d()}$("#spin").hide()};c.src="img/bgs/"+background.url+".png"}}}else{if(/^#[0-9A-F]{6}$/i.test(background.url)===true){if($("#ctx").css("background")!=background.url){$("#ctx").css("background-color",background.url);$("#ctx").css("background-image","none")}}else{if(background.url=="transparent"){if($("#ctx").css("background-image")!="url("+window.location.origin+"/img/grid.png)"){$("#ctx").css("background-color","none");$("#ctx").css("background-image","url(../img/grid.png)")}}else{if($("#ctx").css("background-image")!="url("+window.location.origin+"/img/bgs/"+background.url+".png)"){$("#ctx").css("background-color","none");$("#ctx").css("background-image","url(img/bgs/"+background.url+".png)")}}}b.clearRect(0,0,canvas.width,canvas.height);if(typeof(d)!="undefined"){d()}$("#spin").hide()}}return{draw:a,url:"SAA",}})();pony=(function(){var R,G,B;function spawnPony(options,callback){try{if(typeof(options)=="undefined"){var options={}}if(typeof(options.colorBody)=="undefined"){var colorBody=pony.colorBody}else{var colorBody=pony.colorBody=options.colorBody}if(typeof(options.colorOutline)=="undefined"){var colorOutline=pony.colorOutline}else{var colorBody=pony.colorOutline=options.colorOutline}if(typeof(options.position)=="undefined"){var position=pony.position}else{var position=pony.position=options.position}if(typeof(options.drawcanvas)=="undefined"){var drawcanvas=pony.drawcanvas}else{var drawcanvas=pony.drawcanvas=options.drawcanvas}if(typeof(colorBody)=="object"){R=parseInt((cutHex(colorBody[1])).substring(0,2),16);G=parseInt((cutHex(colorBody[1])).substring(2,4),16);B=parseInt((cutHex(colorBody[1])).substring(4,6),16)}else{var colors=convertColors(colorBody);R=colors[0];G=colors[1];B=colors[2]}if(typeof(position)!="object"){position=pony.position}$(".bodyRotation").text(position[0]+","+position[1]+","+position[2]);$(".colorBody").css("color",colorBody).text(colorBody);$(".colorOutline").css("color",colorOutline).text(colorOutline);if(position[0]==0){$(".bodyRotationText").text("Front");background.draw(ctx,drawcanvas,function(){drawBody.front(ctx,colorBody,"rgb("+R+","+G+","+B+")",colorOutline,"",function(){var options=pony.options;for(i in options){if(options[i]=="off"){break}eval(i+"."+options[i]+".front(ctx)")}if(typeof(callback)!="undefined"&typeof(callback)!="string"){callback()}})})}else{if(position[0]==-45){$(".bodyRotationText").text("Front-Left");background.draw(ctx,drawcanvas,function(){drawBody.frontleft(ctx,colorBody,"rgb("+R+","+G+","+B+")",colorOutline,"",function(){var options=pony.options;for(i in options){if(options[i]=="off"){break}eval(i+"."+options[i]+".frontleft(ctx)")}if(typeof(callback)!="undefined"&typeof(callback)!="string"){callback()}})})}else{if(position[0]==-90){$(".bodyRotationText").text("Left");background.draw(ctx,drawcanvas,function(){drawBody.left(ctx,colorBody,"rgb("+R+","+G+","+B+")",colorOutline,"",function(){var options=pony.options;for(i in options){if(options[i]=="off"){break}eval(i+"."+options[i]+".left(ctx)")}if(typeof(callback)!="undefined"&typeof(callback)!="string"){callback()}})})}else{if(position[0]==-135){$(".bodyRotationText").text("Bottom-Left");background.draw(ctx,drawcanvas,function(){drawBody.bottomleft(ctx,colorBody,"rgb("+R+","+G+","+B+")",colorOutline,function(){var options=pony.options;for(i in options){if(options[i]=="off"){break}eval(i+"."+options[i]+".bottomleft(ctx)")}if(typeof(callback)!="undefined"&typeof(callback)!="string"){callback()}})})}else{if(position[0]==180){$(".bodyRotationText").text("Bottom");background.draw(ctx,drawcanvas,function(){drawBody.bottom(ctx,colorBody,"rgb("+R+","+G+","+B+")",colorOutline,function(){var options=pony.options;for(i in options){if(options[i]=="off"){break}eval(i+"."+options[i]+".bottom(ctx)")}if(typeof(callback)!="undefined"&typeof(callback)!="string"){callback()}})})}else{if(position[0]==135){$(".bodyRotationText").text("Bottom-Right");background.draw(ctx,drawcanvas,function(){drawBody.bottomright(ctx,colorBody,"rgb("+R+","+G+","+B+")",colorOutline,function(){var options=pony.options;for(i in options){if(options[i]=="off"){break}eval(i+"."+options[i]+".bottomright(ctx)")}if(typeof(callback)!="undefined"&typeof(callback)!="string"){callback()}})})}else{if(position[0]==90){$(".bodyRotationText").text("Right");background.draw(ctx,drawcanvas,function(){drawBody.right(ctx,colorBody,"rgb("+R+","+G+","+B+")",colorOutline,"",function(){var options=pony.options;for(i in options){if(options[i]=="off"){break}eval(i+"."+options[i]+".right(ctx)")}if(typeof(callback)!="undefined"&typeof(callback)!="string"){callback()}})})}else{if(position[0]==45){$(".bodyRotationText").text("Front-Right");background.draw(ctx,drawcanvas,function(){drawBody.frontright(ctx,colorBody,"rgb("+R+","+G+","+B+")",colorOutline,"",function(){var options=pony.options;for(i in options){if(options[i]=="off"){break}eval(i+"."+options[i]+".frontright(ctx)")}if(typeof(callback)!="undefined"&typeof(callback)!="string"){callback()}})})}}}}}}}}}catch(e){errorHandler.writeDebug(e.message,2,"spawner.js - spawnPony()",1);errorHandler.writeDebug("==== STACKTRACE ====",2);errorHandler.writeDebug("<pre>"+e.stack+"</pre>",2);errorHandler.writeDebug("==== STACKTRACE END ====",2);$("#spin").hide()}}return{spawnPony:spawnPony,colorBody:"#D3A4E8",colorOutline:"#A067B4",position:[0,0,0],options:{},translate:[0,0],scale:1,drawcanvas:0,}})();var canvasWidth;if(window.innerWidth>1275){canvasWidth=window.innerWidth-297;$("#ctx").attr({width:canvasWidth,height:window.innerHeight})}else{if(window.innerWidth<1275&canvasWidth>986){canvasWidth=986;$("#ctx").attr({width:canvasWidth,height:window.innerHeight})}}$("#spin").spin(opts);Modernizr.load({load:models,complete:function(){errorHandler.writeDebug("Models has been loaded");pony.spawnPony()}});var save={};save=(function(){function a(d,h){var k=new BlobBuilder();var l=$(".bodyPosition").text();var j=l.split(",");var g=$(".colorBody").text();var e=$(".colorOutline").text();var f='{"name":"'+d+'","author":"'+h+'","position":{"x":"'+j[0]+'","y":"'+j[1]+'","z":"'+j[2]+'"},"colorBody":"'+g+'","colorOutline":"'+e+'","bgname": "'+background.url+'"}';k.append(f);var c=k.getBlob("application/xhtml+xml;charset="+document.characterSet);saveAs(c,d+"_by_"+h+".json")}function b(c,d,e){pony.spawnPony({drawcanvas:1},function(){flash();canvas.toBlob(function(f){saveAs(f,c+"_by_"+d+"_export.png");pony.spawnPony({drawcanvas:0});if(typeof(e)!="undefined"){e()}})})}return{jsonSave:a,canvasExport:b,}})();var load=(function(){function a(){var e=document.getElementById("loadInput").files;var d=e[0];var f=0;var c=d.size-1;var b=new FileReader();b.onloadend=function(g){if(g.target.readyState==FileReader.DONE){try{var h=JSON.parse(g.target.result);if(typeof(h.name)!="undefined"){loadData.name=h.name}else{throw"Invalid File (name)"}if(typeof(h.author)!="undefined"){loadData.author=h.author}else{throw"Invalid File (author)"}if(typeof(h.position)!="undefined"){loadData.position=h.position}else{throw"Invalid File (position)"}if(typeof(h.colorBody)!="undefined"){loadData.colorBody=h.colorBody}else{throw"Invalid File (colorBody)"}if(typeof(h.colorOutline)!="undefined"){loadData.colorOutline=h.colorOutline}else{throw"Invalid File (colorOutline)"}if(typeof(h.bgname)!="undefined"){loadData.bgname=h.bgname}else{throw"Invalid File"}loadData.valid=1;$("#loadPreview").text("");$("#loadPreview").append("<p>Name: "+h.name+"</p>");$("#loadPreview").append("<p>Author: "+h.author+"</p>");$("#loadPreview").append("<p>Position: "+h.position.x+","+h.position.y+","+h.position.z+"</p>");$("#loadPreview").append('<p>ColorBody: <span style="color: '+h.colorBody+';">'+h.colorBody+"</span></p>");$("#loadPreview").append('<p>ColorOutline: <span style="color: '+h.colorOutline+';">'+h.colorOutline+"</span></p>");$("#loadPreview").append("<p>Background Name: "+h.bgname+"</p>")}catch(j){$("#loadPreview").html('<p style="color: red;">Invalid File!</p>'+j);loadData.valid=0}}};b.readAsBinaryString(d)}return{loadFile:a,}})();document.getElementById("loadInput").addEventListener("change",load.loadFile,false);$("#loadSave").submit(function(b){b.preventDefault();var a=document.getElementById("loadInput").files;if(!a.length||loadData.valid==0){UI.makeAlert("Please select a valid file!","red");return}pony.colorBody=colorBody.value=loadData.colorBody;pony.colorOutline=colorOutline.value=loadData.colorOutline;pname.value=loadData.name;author.value=loadData.author;background.url=loadData.bgname;$("#opacity").click();pony.spawnPony(pony.colorBody,pony.colorOutline);UI.makeAlert("Loaded.","green")});var positions={front:[268,163,255,561]};var canmove=0,pos=[];function getMousePos(b,a){var c=b.getBoundingClientRect();return{x:a.clientX-c.left,y:a.clientY-c.top}}$(function(){canvas.addEventListener("mousemove",function(e){var d=getMousePos(canvas,e);if(d.x>pony.translate[0]+(positions.front[0])*pony.scale&d.x<pony.translate[0]+(positions.front[0]+positions.front[2])*pony.scale&d.y>pony.translate[1]+(positions.front[1])*pony.scale&d.y<pony.translate[1]+(positions.front[1]+positions.front[3])*pony.scale){$("#ctx").addClass("ctxSelect")}else{$("#ctx").removeClass("ctxSelect")}},false);function a(f){if(canmove){var d=getMousePos(canvas,f);pony.translate[0]=d.x-(positions.front[0])*pony.scale-pos[0];pony.translate[1]=d.y-(positions.front[1])*pony.scale-pos[1];$(".bodyPosition").text("X: "+pony.translate[0]+"; Y: "+pony.translate[1]);pony.spawnPony()}}function c(f){var d=getMousePos(canvas,f);if(d.x>pony.translate[0]+(positions.front[0])*pony.scale&d.x<pony.translate[0]+(positions.front[0]+positions.front[2])*pony.scale&d.y>pony.translate[1]+(positions.front[1])*pony.scale&d.y<pony.translate[1]+(positions.front[1]+positions.front[3])*pony.scale){canmove=true;pos[0]=d.x-pony.translate[0]-(positions.front[0])*pony.scale;pos[1]=d.y-pony.translate[1]-(positions.front[1])*pony.scale;pony.translate[0]=d.x-(positions.front[0])*pony.scale-pos[0];pony.translate[1]=d.y-(positions.front[1])*pony.scale-pos[1];pony.spawnPony();canvas.onmousemove=a}}function b(f){canmove=false;var d=getMousePos(canvas,f);canvas.onmousemove=null}canvas.onmousedown=c;canvas.onmouseup=b});
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(L){var K=L.document,J=function(){return L.URL||L.webkitURL||L},I=L.URL||L.webkitURL||L,H=K.createElementNS("http://www.w3.org/1999/xhtml","a"),F="download" in H,E=function(b){var a=K.createEvent("MouseEvents");return a.initMouseEvent("click",!0,!1,L,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(a)},D=L.webkitRequestFileSystem,C=L.requestFileSystem||D||L.mozRequestFileSystem,A=function(a){(L.setImmediate||L.setTimeout)(function(){throw a},0)},z="application/octet-stream",y=0,x=[],w=function(){for(var d=x.length;d--;){var c=x[d];"string"==typeof c?I.revokeObjectURL(c):c.remove()}x.length=0},v=function(h,g,m){g=[].concat(g);for(var l=g.length;l--;){var k=h["on"+g[l]];if("function"==typeof k){try{k.call(h,m||h)}catch(j){A(j)}}}},u=function(k,h){var c,a,l,g=this,f=k.type,e=!1,O=function(){var b=J().createObjectURL(k);return x.push(b),b},N=function(){v(g,"writestart progress write writeend".split(" "))},M=function(){(e||!c)&&(c=O(k)),a&&(a.location.href=c),g.readyState=g.DONE,N()},o=function(b){return function(){return g.readyState!==g.DONE?b.apply(this,arguments):void 0}},m={create:!0,exclusive:!1};return g.readyState=g.INIT,h||(h="download"),F&&(c=O(k),H.href=c,H.download=h,E(H))?(g.readyState=g.DONE,N(),void 0):(L.chrome&&f&&f!==z&&(l=k.slice||k.webkitSlice,k=l.call(k,0,k.size,z),e=!0),D&&"download"!==h&&(h+=".download"),a=f===z||D?L:L.open(),C?(y+=k.size,C(L.TEMPORARY,y,o(function(b){b.root.getDirectory("saved",m,o(function(d){var j=function(){d.getFile(h,m,o(function(n){n.createWriter(o(function(p){p.onwriteend=function(q){a.location.href=n.toURL(),x.push(n),g.readyState=g.DONE,v(g,"writeend",q)},p.onerror=function(){var q=p.error;q.code!==q.ABORT_ERR&&M()},"writestart progress write abort".split(" ").forEach(function(q){p["on"+q]=g["on"+q]}),p.write(k),g.abort=function(){p.abort(),g.readyState=g.DONE},g.readyState=g.WRITING}),M)}),M)};d.getFile(h,{create:!1},o(function(n){n.remove(),j()}),o(function(n){n.code===n.NOT_FOUND_ERR?j():M()}))}),M)}),M),void 0):(M(),void 0))},t=u.prototype,s=function(d,c){return new u(d,c)};return t.abort=function(){var b=this;b.readyState=b.DONE,v(b,"abort")},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,L.addEventListener("unload",w,!1),s}(self);
/*! @source http://purl.eligrey.com/github/BlobBuilder.js/blob/master/BlobBuilder.js */
var BlobBuilder=BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||(function(I){var P=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},v=function(){this.data=[]},w=function(a,c,b){this.data=a;this.size=a.length;this.type=c;this.encoding=b},H=v.prototype,x=w.prototype,D=I.FileReaderSync,S=function(a){this.code=this[this.name=a]},F=("NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR").split(" "),y=F.length,C=I.URL||I.webkitURL||I,A=C.createObjectURL,Q=C.revokeObjectURL,N=C,J=I.btoa,M=I.atob,E=false,K=function(a){E=!a},O=I.ArrayBuffer,L=I.Uint8Array;v.fake=x.fake=true;while(y--){S.prototype[F[y]]=y+1}try{if(L){K.apply(0,new L(1))}}catch(z){}if(!C.createObjectURL){N=I.URL={}}N.createObjectURL=function(b){var a=b.type,c;if(a===null){a="application/octet-stream"}if(b instanceof w){c="data:"+a;if(b.encoding==="base64"){return c+";base64,"+b.data}else{if(b.encoding==="URI"){return c+","+decodeURIComponent(b.data)}}if(J){return c+";base64,"+J(b.data)}else{return c+","+encodeURIComponent(b.data)}}else{if(real_create_object_url){return real_create_object_url.call(C,b)}}};N.revokeObjectURL=function(a){if(a.substring(0,5)!=="data:"&&real_revoke_object_url){real_revoke_object_url.call(C,a)}};H.append=function(e){var g=this.data;if(L&&e instanceof O){if(E){g.push(String.fromCharCode.apply(String,new L(e)))}else{var b="",c=new L(e),a=0,f=c.length;for(;a<f;a++){b+=String.fromCharCode(c[a])}}}else{if(P(e)==="Blob"||P(e)==="File"){if(D){var d=new D;g.push(d.readAsBinaryString(e))}else{throw new S("NOT_READABLE_ERR")}}else{if(e instanceof w){if(e.encoding==="base64"&&M){g.push(M(e.data))}else{if(e.encoding==="URI"){g.push(decodeURIComponent(e.data))}else{if(e.encoding==="raw"){g.push(e.data)}}}}else{if(typeof e!=="string"){e+=""}g.push(unescape(encodeURIComponent(e)))}}}};H.getBlob=function(a){if(!arguments.length){a=null}return new w(this.data.join(""),a,"raw")};H.toString=function(){return"[object BlobBuilder]"};x.slice=function(d,c,a){var b=arguments.length;if(b<3){a=null}return new w(this.data.slice(d,b>1?c:this.data.length),a,this.encoding)};x.toString=function(){return"[object Blob]"};return v}(self));
/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */
(function(h){var g=h.Uint8Array,m=h.HTMLCanvasElement,l=/\s*;\s*base64\s*(?:;|$)/i,j,k=function(e){var d=e.length,t=new g(d/4*3|0),f=0,b=0,a=[0,0],w=0,c=0,s,v,u;while(d--){v=e.charCodeAt(f++);s=j[v-43];if(s!==255&&s!==u){a[1]=a[0];a[0]=v;c=(c<<6)|s;w++;if(w===4){t[b++]=c>>>16;if(a[1]!==61){t[b++]=c>>>8}if(a[0]!==61){t[b++]=c}w=0}}}return t.buffer};if(g){j=new g([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])}if(m&&!m.prototype.toBlob){m.prototype.toBlob=function(a,d){if(!d){d="image/png"}var e=Array.prototype.slice.call(arguments,1),s=this.toDataURL.apply(this,e),c=s.indexOf(","),r=s.substring(c+1),b=l.test(s.substring(0,c)),q=h.BlobBuilder||h.WebKitBlobBuilder||h.MozBlobBuilder,f=new q,t;if(q.fake){t=f.getBlob(d);if(b){t.encoding="base64"}else{t.encoding="URI"}t.data=r;t.size=r.length}else{if(g){if(b){f.append(k(r))}else{f.append(decodeURIComponent(r))}t=f.getBlob(d)}}a(t)}}}(self));